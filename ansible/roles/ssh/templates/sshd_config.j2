# {{ ansible_managed }}
#

Include /etc/ssh/sshd_config.d/*.conf

Port {{ ansible_ssh_port }}
AddressFamily inet
HostKey /etc/ssh/ssh_host_key
HostKey /etc/ssh/ssh_host_rsa_key
AllowUsers {{ ssh_allow_users }}
Ciphers aes256-gcm@openssh.com
MACs hmac-sha2-512-etm@openssh.com
KexAlgorithms curve25519-sha256@libssh.org,diffie-hellman-group-exchange-sha256
HostKeyAlgorithms rsa-sha2-512,rsa-sha2-256,ssh-ed25519
RekeyLimit 1G 1H
SyslogFacility AUTH
LogLevel VERBOSE
LoginGraceTime 10s
MaxStartups 1
MaxSessions 2
MaxAuthTries 2
ClientAliveInterval 30
ClientAliveCountMax 20
PermitRootLogin no
StrictModes yes
PubkeyAuthentication yes
AuthorizedKeysFile %h/.ssh/authorized_keys
IgnoreRhosts yes
PasswordAuthentication no
PermitEmptyPasswords no
HostbasedAuthentication no
KbdInteractiveAuthentication no
UsePAM yes
ChallengeResponseAuthentication no
Compression delayed
AllowAgentForwarding no
AllowTcpForwarding no
X11Forwarding yes
GatewayPorts no
PermitTunnel no
UseDNS no
PrintMotd no
PrintLastLog yes
#PermitUserEnvironment no
AcceptEnv LANG LC_*
Subsystem sftp  /usr/lib/openssh/sftp-server
#Subsystem sftp  /usr/lib/sftp-server
#Subsystem sftp  /usr/libexec/sftp-server
#TrustedUserCAKeys /etc/ssh/ca.pub
#Match User proxy
